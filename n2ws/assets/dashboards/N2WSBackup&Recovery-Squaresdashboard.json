{"title":"N2WS Backup & Recovery - Squares dashboard","description":"","widgets":[{"id":2637556285457016,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.accounts_num{$host,$user}","aggregator":"last"}],"custom_links":[{"link":"https://{{host.value}}/ui/dashboard/","label":"Go to host's Dashboard"}],"title":"Accounts","title_size":"16","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":45,"y":16,"width":15,"height":6}},{"id":1132115760137398,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.policies_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Policies","title_size":"16","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":45,"y":25,"width":15,"height":6}},{"id":2895675078618534,"definition":{"type":"free_text","text":"Total data for all N2WS Backup & Recovery servers","color":"#4d4d4d","font_size":"auto","text_align":"left"},"layout":{"x":0,"y":7,"width":53,"height":4}},{"id":6833713613288876,"definition":{"type":"free_text","text":"N2WS Backup & Recovery  Servers Status","color":"#2B13E6","font_size":"56","text_align":"left"},"layout":{"x":14,"y":0,"width":24,"height":6}},{"id":3660811894528512,"definition":{"type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{*} by {host}"}},"custom_links":[{"link":"https://{{$ip.value}}/ui/dashboard/","label":"Go to host's Dashboard"}],"title":"Available hosts","title_size":"16","title_align":"left","node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":0,"y":16,"width":28,"height":24}},{"id":4889683502691186,"definition":{"type":"query_value","requests":[{"q":"(sum:cpm_metric.dashboard_activity.backup_success_num{$host,$user}/(sum:cpm_metric.dashboard_activity.backup_success_num{$host,$user}+sum:cpm_metric.dashboard_activity.backup_partial_num{$host,$user}+sum:cpm_metric.dashboard_activity.backup_fail_num{$host,$user}))*100","aggregator":"avg","conditional_formats":[{"comparator":">","value":80,"palette":"white_on_green"},{"comparator":"<=","value":50,"palette":"white_on_red"},{"comparator":">","value":50,"palette":"white_on_yellow"},{"comparator":"<","value":80,"palette":"white_on_yellow"}]}],"custom_links":[],"title":"Backup to EBS","title_size":"13","title_align":"left","custom_unit":"%","precision":0,"text_align":"left"},"layout":{"x":30,"y":16,"width":13,"height":6}},{"id":4495620089867176,"definition":{"type":"query_value","requests":[{"q":"(sum:cpm_metric.dashboard_activity.backup_dr_success_num{$host,$user}/(sum:cpm_metric.dashboard_activity.backup_dr_success_num{$host,$user}+sum:cpm_metric.dashboard_activity.backup_dr_partial_num{$host,$user}+sum:cpm_metric.dashboard_activity.backup_dr_fail_num{$host,$user}))*100","aggregator":"last","conditional_formats":[{"comparator":">","value":80,"palette":"white_on_green"},{"comparator":"<=","value":50,"palette":"white_on_red"},{"comparator":"<","value":80,"palette":"white_on_yellow"},{"comparator":">","value":50,"palette":"white_on_yellow"}]}],"custom_links":[],"title":"DR backups","title_size":"13","title_align":"left","precision":0,"text_align":"left"},"layout":{"x":30,"y":25,"width":13,"height":6}},{"id":7599208437230966,"definition":{"type":"query_value","requests":[{"q":"(sum:cpm_metric.dashboard_activity.backup_s3_success_num{$host,$user}/(sum:cpm_metric.dashboard_activity.backup_s3_success_num{$host,$user}+sum:cpm_metric.dashboard_activity.backup_s3_partial_num{$host,$user}+sum:cpm_metric.dashboard_activity.backup_s3_fail_num{$host,$user}))*100","aggregator":"last","conditional_formats":[{"comparator":">","value":80,"palette":"white_on_green"},{"comparator":"<=","value":50,"palette":"white_on_red"},{"comparator":">","value":50,"palette":"white_on_yellow"},{"comparator":"<","value":80,"palette":"white_on_yellow"}]}],"custom_links":[],"title":"Backup to S3","title_size":"13","title_align":"left","custom_unit":"%","precision":0,"text_align":"left"},"layout":{"x":30,"y":34,"width":13,"height":6}},{"id":4085517614690048,"definition":{"type":"image","url":"https://n2ws.com/wp-content/uploads/2018/10/N2WS_Logo-Primary-2.svg","sizing":"fit"},"layout":{"x":0,"y":0,"width":12,"height":7}},{"id":3059142389457708,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.protected_instances_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Instances","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":0,"y":46,"width":10,"height":6}},{"id":38213229812828,"definition":{"type":"free_text","text":"How many entities have you backed up?","color":"#4d4d4d","font_size":"16","text_align":"left"},"layout":{"x":0,"y":42,"width":36,"height":3}},{"id":4931723730478434,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.protected_efs_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"EFS","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":11,"y":64,"width":11,"height":6}},{"id":2428912746970058,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.protected_redshift_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Redshift","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":23,"y":55,"width":11,"height":6}},{"id":6882875583965308,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.protected_rds_db_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"RDS","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":23,"y":46,"width":11,"height":6}},{"id":1705799585091706,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.protected_volumes_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Volumes","title_size":"13","title_align":"left","autoscale":true,"precision":2,"text_align":"left"},"layout":{"x":11,"y":46,"width":11,"height":6}},{"id":1828199094188556,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.protected_ddb_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Dynamo DB","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":11,"y":55,"width":11,"height":6}},{"id":5138781865653636,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.protected_rds_clus_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Aurora","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":0,"y":55,"width":10,"height":6}},{"id":2588239066287084,"definition":{"type":"free_text","text":"Total summary","color":"#4d4d4d","font_size":"24","text_align":"left"},"layout":{"x":45,"y":12,"width":16,"height":3}},{"id":300960160276958,"definition":{"type":"free_text","text":"How many snapshots have you backed up?","color":"#4d4d4d","font_size":"16","text_align":"left"},"layout":{"x":39,"y":42,"width":34,"height":3}},{"id":5429842537420874,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_efs_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"EFS","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":63,"y":55,"width":11,"height":6}},{"id":2150896737699084,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_redshift_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Redshift","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":51,"y":55,"width":11,"height":6}},{"id":4378878990717088,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_rds_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"RDS","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":51,"y":46,"width":11,"height":6}},{"id":1372798678484004,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_volume_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Volumes","title_size":"13","title_align":"left","autoscale":true,"precision":2,"text_align":"left"},"layout":{"x":39,"y":46,"width":11,"height":6}},{"id":5430267548904274,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_ddb_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Dynamo DB","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":39,"y":55,"width":11,"height":6}},{"id":6866015780446286,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_rds_clus_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Aurora","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":63,"y":46,"width":11,"height":6}},{"id":4891418817766752,"definition":{"type":"free_text","text":"How many DR snapshots have you backed up?","color":"#4d4d4d","font_size":"16","text_align":"left"},"layout":{"x":80,"y":42,"width":36,"height":3}},{"id":4189990561597372,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_efs_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"EFS","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":92,"y":55,"width":11,"height":6}},{"id":6794880110244638,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_redshift_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Redshift","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":104,"y":55,"width":11,"height":6}},{"id":3804091029771224,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_dr_rds_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"RDS","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":92,"y":46,"width":11,"height":6}},{"id":2376719938053794,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_dr_volume_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Volumes","title_size":"13","title_align":"left","autoscale":true,"precision":2,"text_align":"left"},"layout":{"x":80,"y":46,"width":11,"height":6}},{"id":4938111418300732,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_ddb_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Dynamo DB","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":80,"y":55,"width":11,"height":6}},{"id":7941183197778242,"definition":{"type":"query_value","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_rds_clus_num{$host,$user}","aggregator":"last"}],"custom_links":[],"title":"Aurora","title_size":"13","title_align":"left","autoscale":true,"precision":0,"text_align":"left"},"layout":{"x":104,"y":46,"width":11,"height":6}},{"id":2288327808202594,"definition":{"type":"free_text","text":"Success Rate","color":"#4d4d4d","font_size":"24","text_align":"left"},"layout":{"x":30,"y":12,"width":15,"height":3}},{"id":2595322878823152,"definition":{"type":"timeseries","requests":[{"q":"sum:cpm_metric.dashboard_state.snapshots_ddb_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_efs_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_rds_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_dr_rds_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_volume_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_rds_clus_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_redshift_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_dr_volume_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_dr_rds_clus_num{$host,$user} by {host}, sum:cpm_metric.dashboard_state.snapshots_ddb_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_efs_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_rds_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_dr_rds_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_volume_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_rds_clus_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_redshift_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_dr_volume_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_dr_rds_clus_num{$host,$user} by {host}","metadata":[{"expression":"sum:cpm_metric.dashboard_state.snapshots_ddb_num{$host,$user} by {host}","alias_name":"DynamoDB snapshots "},{"expression":"sum:cpm_metric.dashboard_state.snapshots_efs_num{$host,$user} by {host}","alias_name":"EFS snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_rds_num{$host,$user} by {host}","alias_name":"RDS snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_dr_rds_num{$host,$user} by {host}","alias_name":"DR RDS snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_volume_num{$host,$user} by {host}","alias_name":"Volumes snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_rds_clus_num{$host,$user} by {host}","alias_name":"Aurora snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_redshift_num{$host,$user} by {host}","alias_name":"Redshift snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_dr_volume_num{$host,$user} by {host}","alias_name":"DR Volume snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_dr_rds_clus_num{$host,$user} by {host}","alias_name":"DR Aurora snapshots"},{"expression":"sum:cpm_metric.dashboard_state.snapshots_ddb_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_efs_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_rds_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_dr_rds_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_volume_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_rds_clus_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_redshift_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_dr_volume_num{$host,$user} by {host}+sum:cpm_metric.dashboard_state.snapshots_dr_rds_clus_num{$host,$user} by {host}","alias_name":"Summary"}],"display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"custom_links":[],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Total amount of snapshots for all hosts by time","title_size":"16","title_align":"left","time":{"live_span":"1mo"},"show_legend":true},"layout":{"x":62,"y":16,"width":54,"height":25}},{"id":5713746525788918,"definition":{"type":"event_stream","query":"*","tags_execution":"and","event_size":"s","title":"Alerts gathering for all hosts","title_size":"16","title_align":"left","time":{"live_span":"1w"}},"layout":{"x":0,"y":73,"width":74,"height":29}},{"id":6784160051087150,"definition":{"type":"timeseries","requests":[{"q":"sum:cpm_metric.dashboard_activity.backup_success_num{$host,$user} by {cpm}, sum:cpm_metric.dashboard_activity.backup_fail_num{$host,$user} by {cpm}, sum:cpm_metric.dashboard_activity.backup_partial_num{$host,$user} by {cpm}","metadata":[{"expression":"sum:cpm_metric.dashboard_activity.backup_success_num{$host,$user} by {cpm}","alias_name":"Successful EBS backups"},{"expression":"sum:cpm_metric.dashboard_activity.backup_fail_num{$host,$user} by {cpm}","alias_name":"EBS backup failures"},{"expression":"sum:cpm_metric.dashboard_activity.backup_partial_num{$host,$user} by {cpm}","alias_name":"Partially successful backups"}],"display_type":"area","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"on_right_yaxis":false}],"custom_links":[],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Backups success out of total over time","title_size":"16","title_align":"left","time":{"live_span":"1mo"},"show_legend":true,"legend_size":"0"},"layout":{"x":76,"y":73,"width":39,"height":29}}],"template_variables":[{"name":"host","default":"*","prefix":"host"},{"name":"user","default":"*","prefix":"cpm"}],"layout_type":"free","is_read_only":false,"notify_list":[],"id":"mxh-xpz-32q"}